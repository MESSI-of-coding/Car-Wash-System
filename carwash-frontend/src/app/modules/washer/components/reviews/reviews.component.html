<div class="p-6 space-y-8 max-w-3xl mx-auto">
    <!-- Submitted Reviews Section -->
    <section class="space-y-6">
        <div class="flex items-center justify-between">
            <h2 class="text-2xl font-bold text-gray-900 flex items-center gap-2">
                <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
                Your Reviews History
            </h2>
            <span class="bg-gray-100 px-3 py-1 rounded-full text-sm">
                {{ submittedReviews.length }} reviews
            </span>
        </div>

        <!-- Reviews List -->
        <div class="space-y-4" *ngIf="submittedReviews.length; else noReviews">
            <div *ngFor="let r of submittedReviews"
                class="bg-white p-6 rounded-xl shadow-sm hover:shadow-md transition-shadow border border-gray-100">
                <div class="flex items-start justify-between">
                    <div class="space-y-2">
                        <h3 class="font-semibold text-lg">{{ r.customerName }}</h3>
                        <p class="text-sm text-gray-600">
                            Request #{{ r.requestId }} •
                            {{ r.reviewDate | date:'mediumDate' }}
                        </p>
                    </div>
                    <div class="flex items-center gap-1">
                        <span class="text-amber-600 font-bold">{{ r.rating }}.0</span>
                        <div class="flex">
                            <span *ngFor="let star of [1,2,3,4,5]" class="text-amber-400">
                                {{ star <= r.rating ? '★' : '☆' }} </span>
                        </div>
                    </div>
                </div>
                <p class="mt-4 text-gray-700 leading-relaxed">{{ r.comment }}</p>
            </div>
        </div>

        <ng-template #noReviews>
            <div class="text-center py-12 bg-gray-50 rounded-xl">
                <svg class="mx-auto h-16 w-16 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <h3 class="mt-4 text-gray-900 font-medium">No reviews submitted yet</h3>
                <p class="mt-1 text-gray-600">Your reviews will appear here once submitted</p>
            </div>
        </ng-template>
    </section>

    <!-- Review Form Section -->
    <section class="bg-gray-50 p-6 rounded-xl space-y-6">
        <div class="space-y-1">
            <h3 class="text-xl font-semibold text-gray-900">Submit New Review</h3>
            <p class="text-sm text-gray-600">Share your experience with the customer</p>
        </div>

        <form class="space-y-6" (ngSubmit)="submitReview()">
            <!-- Request ID -->
            <div>
                <label for="requestId" class="block text-sm font-medium text-gray-700 mb-2">
                    Service Request ID
                    <span class="text-red-500">*</span>
                </label>
                <input type="number" id="requestId" [(ngModel)]="reviewForm.requestId" name="requestId" required
                    class="input-field" [class.input-error]="showRequestIdError">
                <p *ngIf="showRequestIdError" class="text-red-600 text-sm mt-1">
                    Please enter a valid service request ID
                </p>
            </div>

            <!-- Rating -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">
                    Service Rating
                    <span class="text-red-500">*</span>
                </label>
                <div class="grid grid-cols-5 gap-2">
                    <button type="button" *ngFor="let r of [1,2,3,4,5]" (click)="reviewForm.rating = r"
                        class="rating-star" [class.rating-star-active]="r <= reviewForm.rating">
                        {{ r <= reviewForm.rating ? '★' : '☆' }} </button>
                </div>
                <p *ngIf="showRatingError" class="text-red-600 text-sm mt-1">
                    Please select a rating between 1-5 stars
                </p>
            </div>

            <!-- Comment -->
            <div>
                <label for="comment" class="block text-sm font-medium text-gray-700 mb-2">
                    Review Comment
                    <span class="text-gray-500 text-sm">(max 500 characters)</span>
                </label>
                <textarea id="comment" rows="4" [(ngModel)]="reviewForm.comment" name="comment" maxlength="500"
                    class="input-field"></textarea>
                <div class="flex justify-between mt-1">
                    <p *ngIf="showCommentError" class="text-red-600 text-sm">
                        Please provide a meaningful review
                    </p>
                    <span class="text-gray-500 text-sm">
                        {{ 500 - (reviewForm.comment?.length || 0) }} characters remaining
                    </span>
                </div>
            </div>

            <!-- Submit Button -->
            <button type="submit" class="btn-primary w-full" [disabled]="isSubmitting">
                <span *ngIf="!isSubmitting">Submit Review</span>
                <span *ngIf="isSubmitting" class="flex items-center justify-center gap-2">
                    <span class="loading loading-spinner"></span>
                    Submitting...
                </span>
            </button>
        </form>
    </section>
    </div>